<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"/><meta content="yes" name="apple-mobile-web-app-capable"/><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/><meta content="telephone=no" name="format-detection"/><meta name="description" content="Welcome to Johnny's world."/><title>Spiral Matrix | Johnny Mao's blog</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"/><link rel="stylesheet" type="text/css" href="/css/pure-min.css"/><link rel="stylesheet" type="text/css" href="/css/grids-responsive-min.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"/><link rel="alternate" type="application/atom+xml" href="/atom.xml"/></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Spiral Matrix</h1><a id="logo" href="/">Johnny Mao's blog</a><p class="description">Be Perseverance</p></div><div id="nav-menu"><a href="/" class="current"><i class="icon-home"> Home</i></a><a href="/archives/"><i class="icon-archive"> Archive</i></a><a href="/about/"><i class="icon-about"> About</i></a><a href="/atom.xml"><i class="icon-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post post-page"><h1 class="post-title">Spiral Matrix</h1><div class="post-meta">2015-12-20 | <span class="categories">Categorized in<a href="/categories/Algorithm/"> Algorithm</a></span></div><span data-disqus-identifier="2015/12/20/Spiral-Matrix/" class="disqus-comment-count"></span><div class="post-content"><p>最近无聊的很，看了看一些基础的面试题，虽说简单点，但还是能学到一点东西的。
就比方main函数结束之后还能执行函数吗？答案是可以，使用atexit注册一个函数就可以了。</p>
<p>下面重点谈谈这个螺旋矩阵！
关于螺旋矩阵的说法不一，这里指的是形如
21  22................
20  7  8  9  10
19  6  1  2  11
18  5  4  3  12
17  16 15 14 13
的矩阵。</p>
<p>问题有两个：</p>
<ol>
<li>
<p>编程实现输出这个矩阵</p>
</li>
<li>
<p>设1点的坐标是(0,0),x方向向右为正,y方向向下为正.例如:7的坐标为(-1,-1) ,2的坐标为(0,1),3的坐标为(1,1).编程实现输入任意一点坐标(x,y),输出所对应的数字。</p>
</li>
<li>
<p>第一个问题我是采用模拟进行构造的，可以看到从1开始的方向变化始终是 right-&gt;down-&gt;left-&gt;up，
所持续走的长度为1-&gt;1-&gt;2-&gt;2-&gt;3-&gt;3-&gt;...，发现了这个规律不难写出代码了！注意下面我把1的位置设置
在((n-1)/2, (n-1)/2)的位置。</p>
</li>
</ol>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Simulate</span><span class="params">(<span class="keyword">int</span> n)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x, y;</span><br><span class="line">    x = y = (n - <span class="number">1</span>) / <span class="number">2</span>; <span class="comment">//1的位置</span></span><br><span class="line">    data[x][y] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">2</span>;</span><br><span class="line">    DIRECTION dir = RIGHT;</span><br><span class="line">    <span class="keyword">while</span>(num  &lt;= n * n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">switch</span>(dir)</span><br><span class="line">            &#123;</span><br><span class="line">            <span class="keyword">case</span> LEFT:</span><br><span class="line">                --y;    <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> RIGHT:</span><br><span class="line">                ++y;     <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> UP:</span><br><span class="line">                --x;    <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> DOWN:</span><br><span class="line">                ++x;    <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            data[x][y] = num++;</span><br><span class="line">        &#125;</span><br><span class="line">        count++;</span><br><span class="line">        <span class="keyword">if</span>(count == <span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            count = <span class="number">0</span>;</span><br><span class="line">            len++;    </span><br><span class="line">        &#125;</span><br><span class="line">        dir = (DIRECTION)((dir + <span class="number">1</span>) % <span class="number">4</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>第二个问题我也是先找出规律，然后进行模拟。
首先，不难看出n * n的螺旋矩阵的右下角的坐标一定是(m, m),这里m=n-1
通过观察，可以看出 n=1的时候，右下角(0,0)的值为1,当n=2的时候，右下角(1,1)的坐标值为(3,3)，当n=3的时候，右下角(2,2)的坐标值为13.直觉告诉我，这个值是关于n的二次函数，设f(n) = a * n^2 + b * n + c
联立方程组，可以求得a,b,c。 最终算出来的f(n) = 4 * n^2 - 2*n + 1
下面再根据(x,y)和右下角(n-1,n-1)之间的关系，计算出值即可。这里要注意当x的值与n-1相同时，应优先考虑y与-m是否有联系。这就要求在函数中要注意x，y的判断先后顺序了。
代码如下：</li>
</ol>
<p>//以(1,1)所在位置作为原点,向右作为x正半轴，向下作为y正半轴</p>
<p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">int GetValue(int x, int y)</span><br><span class="line">&#123;</span><br><span class="line">    int <span class="keyword">m</span> = <span class="literal">max</span>(<span class="literal">abs</span>(x), <span class="literal">abs</span>(y));</span><br><span class="line">    int rightBottom = <span class="keyword">m</span> * <span class="keyword">m</span> * 4 - 2 * <span class="keyword">m</span> + 1;</span><br><span class="line">    int value = 0;</span><br><span class="line">    <span class="keyword">if</span>(x == -<span class="keyword">m</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        value = rightBottom + 2 * <span class="keyword">m</span> + <span class="keyword">m</span> - y;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( y == <span class="keyword">m</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        value = rightBottom + <span class="keyword">m</span> - x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(y == -<span class="keyword">m</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        value = rightBottom + 4 * <span class="keyword">m</span> + x + <span class="keyword">m</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>( x == <span class="keyword">m</span> )</span><br><span class="line">    &#123;</span><br><span class="line">        value = rightBottom - (<span class="keyword">m</span> - y);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> value;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>#螺旋矩阵
螺旋矩阵：螺旋矩阵是指一个呈螺旋状的矩阵，它的数字由第一行开始到右边不断变大，向下变大，向左变大，向上变大，如此循环。
就像这样</p>
<p><img src="http://imgsrc.baidu.com/forum/cp%3Dtieba%2C10%2C325%3Bap%3Djava%B0%C9%2C90%2C333/sign=c653ff23e7cd7b89fd2132c7664120c6/245bc9fdfc039245c4dc1ee68694a4c27c1e2507.jpg" alt=""></p>
<p>看起来不难算，不过真让你写这家伙的代码可不是几分钟就能搞定的。当时教授说能把这题（和汉诺塔）写出来，java基础运算部分你就没问题了。跟任何题一样，螺旋矩阵的算法不止一个。网上大部分的算法都是用几个loop一次一次的靠着边界拐弯往里绕，每次让一个int值 +1，然后把数存进一个二维数组里。这算法也正是根据螺旋矩阵本身的定义推出来的，不过写起来比较长，也比较麻烦。
我这个算法是通过逆向推理写出来的，也就是说，不是从1算到25而是从25算到1。</p>
<p>如果N值大的话，比如说N=10，你可以看出来这个矩阵其实可以分成四个三角形。
<img src="http://imgsrc.baidu.com/forum/cp%3Dtieba%2C10%2C129%3Bap%3Djava%B0%C9%2C90%2C137/sign=7a5196373c6d55fbd18b7e6204472d2b/cfad1530e924b899f5c783d16f061d95087bf6f2.jpg" alt="">
<img src="http://tieba.baidu.com/photo/p?kw=java&amp;ie=utf-8&amp;flux=1&amp;tid=2519897186&amp;pic_id=2a84788b4710b912c93e1517c2fdfc03904522f5&amp;pn=1&amp;fp=2&amp;see_lz=1" alt=""></p>
<p>可以看到，同一个三角里的所有书只要按照指定方向往回传，到1需要的步数就是它的值。也就是说，只要直到哪些坐标该网上，哪些坐标该往下就可以完成递归了。如果把矩阵放到x-y平面上列出几个公式就行了，就拿N=5举例子
<img src="http://imgsrc.baidu.com/forum/w%3D580%3Bcp%3Dtieba%2C10%2C429%3Bap%3Djava%B0%C9%2C90%2C437/sign=4df43fc63b292df597c3ac1d8c0a3f10/ddbc27f5e0fe9925652b93b935a85edf8cb1714e.jpg" alt=""></p>
<p>这么一来主程序就完成了
<img src="http://imgsrc.baidu.com/forum/w%3D580/sign=e8e1f4e6b90e7bec23da03e91f2cb9fa/737bfa1f3a292df5311e4cfcbd315c6036a87394.jpg" alt=""></p>
<p>四个if来决定坐标走向。跟其它方法不同的是：倒推只需要坐标和N就能算出来值，而不必每次都把整个矩阵打出来。效率方面肯定不如正推法，因为你每次都要算一遍，不过写起来就简单多了。</p>
<p>main方法只需要用两个loop把所有值Print出来就行了。</p>
<p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Helix &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> N = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Helix</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> ((x==<span class="number">1</span>) &amp;&amp; (y==<span class="number">1</span>)) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> ((x-y&gt;=<span class="number">1</span>)&amp;&amp;(x+y&lt;=N)) <span class="keyword">return</span> (<span class="number">1</span> + Helix(x+<span class="number">1</span>,y));</span><br><span class="line"><span class="keyword">if</span> ((x-y&gt;=<span class="number">1</span>)&amp;&amp;(x+y&gt;N)) <span class="keyword">return</span> (<span class="number">1</span> + Helix(x, y+<span class="number">1</span>)); </span><br><span class="line"><span class="keyword">if</span> ((x-y&lt;<span class="number">1</span>)&amp;&amp;(x+y&lt;=N+<span class="number">1</span>)) <span class="keyword">return</span> (<span class="number">1</span> + Helix(x, y-<span class="number">1</span>));</span><br><span class="line"><span class="keyword">if</span> ((x-y&lt;<span class="number">1</span>)&amp;&amp;(x+y)&gt;N+<span class="number">1</span>) <span class="keyword">return</span> (<span class="number">1</span> + Helix(x-<span class="number">1</span>,y));</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>;&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">N = <span class="comment">//输入int值;</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i= <span class="number">1</span>; i &lt;= N; i++)&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j= <span class="number">1</span>; j &lt;= N; j++)</span><br><span class="line">System.out.print(Helix(i,j) + <span class="string">"\t"</span>);</span><br><span class="line">System.out.println(<span class="string">""</span>); &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</div><div class="tags"><a href="/tags/Matrix/">Matrix</a><a href="/tags/interview/">interview</a></div><div class="post-nav"><a href="/2016/02/22/Android应用自适应分辨率的解决办法/" class="pre"><i class="icon-previous">Android应用自适应分辨率的解决办法</i></a><a href="/2015/12/14/转-面试中的二叉树题目/" class="next">#转#面试中的二叉树题目<i class="icon-next"></i></a></div><div id="disqus_thread"><script>var disqus_shortname = 'johnnymao';
var disqus_identifier = '2015/12/20/Spiral-Matrix/';
var disqus_title = 'Spiral Matrix';
var disqus_url = 'http://yoursite.com/2015/12/20/Spiral-Matrix/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//johnnymao.disqus.com/count.js" async="async"></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search" class="search-form-input"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title">Categories</div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Data-structure/">Data structure</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Front-End/">Front-End</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/GC-Algoritm/">GC Algoritm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unity/">Unity</a></li></ul></div><div class="widget"><div class="widget-title">Tags</div><div class="tagcloud"><a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/android/" style="font-size: 15px;">android</a> <a href="/tags/binary-tree/" style="font-size: 15px;">binary tree</a> <a href="/tags/time-complexity/" style="font-size: 15px;">time complexity</a> <a href="/tags/space-complexity/" style="font-size: 15px;">space complexity</a> <a href="/tags/html/" style="font-size: 15px;">html</a> <a href="/tags/interview/" style="font-size: 15px;">interview</a> <a href="/tags/unity-script/" style="font-size: 15px;">unity script</a> <a href="/tags/StringTokenizer/" style="font-size: 15px;">StringTokenizer</a> <a href="/tags/Matrix/" style="font-size: 15px;">Matrix</a> <a href="/tags/HTML-Tag/" style="font-size: 15px;">HTML Tag</a> <a href="/tags/computer-graphic/" style="font-size: 15px;">computer graphic</a> <a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a></div></div><div class="widget"><div class="widget-title">Recent</div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/04/28/Java-IO/">Java.IO</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/28/Java-HashMap/">Java HashMap</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/17/Sorting-Algorithms/">Sorting Algorithms</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/04/Unity-Tips/">Unity Tips</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/10/Unity碰撞检测中碰撞器与触发器的区别/">Unity碰撞检测中碰撞器与触发器的区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/09/自适应网页设计/">转-自适应网页设计</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/07/GC/">深度缓冲与画家算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/22/Android应用自适应分辨率的解决办法/">Android应用自适应分辨率的解决办法</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/20/Spiral-Matrix/">Spiral Matrix</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/14/转-面试中的二叉树题目/">#转#面试中的二叉树题目</a></li></ul></div><div class="widget"><div class="widget-title">Recent Comments</div><script type="text/javascript" src="//johnnymao.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title">Blogroll</div><ul></ul><a href="http://www.genosage.com/" title="张老板的秘密花园" target="_blank">张老板的秘密花园</a><ul></ul><a href="http://dirtymac.github.io" title="秦总的青瓦台" target="_blank">秦总的青瓦台</a><ul></ul><a href="https://unity3d.com/cn/learn/tutorials" title="Unity教程" target="_blank">Unity教程</a></div></div></div></div><div id="footer">© <a href="/" rel="nofollow">Johnny Mao's blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> </a><div class="analytics"><script>var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cspan id='cnzz_stat_icon_1256929604'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1256929604%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script></div></div><a id="rocket" href="#top" class="show"></a><script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/totop.js" type="text/javascript"></script><script src="/js/fancybox.pack.js" type="text/javascript"></script>
<script src="/js/jquery.fancybox.js" type="text/javascript"></script><link rel="stylesheet" href="/css/jquery.fancybox.css" type="text/css"></div></body></html>